{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://docs.evolynt.com/schemas/product.json",
  "title": "Evolynt::Commerce::Product",
  "description": "JSON Schema for Evolynt::Commerce::Product Blueprint resource",
  "type": "object",
  "properties": {
    "Type": {
      "type": "string",
      "const": "Evolynt::Commerce::Product"
    },
    "Properties": {
      "type": "object",
      "properties": {
        "Name": {
          "type": "string",
          "minLength": 1
        },
        "ProductType": {
          "type": "string",
          "enum": [
            "course",
            "community",
            "page",
            "coaching",
            "feed"
          ]
        },
        "Description": {
          "type": "string"
        },
        "Course": {
          "type": "object",
          "properties": {
            "Title": {
              "type": "string",
              "minLength": 1
            },
            "Description": {
              "type": "string"
            },
            "Modules": {
              "default": [],
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "Title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "Order": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "maximum": 9007199254740991
                  },
                  "Lessons": {
                    "default": [],
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "Title": {
                          "type": "string",
                          "minLength": 1
                        },
                        "Order": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        },
                        "ContentType": {
                          "type": "string",
                          "enum": [
                            "video",
                            "text",
                            "video_and_text"
                          ]
                        },
                        "VideoEmbedUrl": {
                          "type": "string",
                          "format": "uri"
                        },
                        "VideoDurationSeconds": {
                          "type": "integer",
                          "exclusiveMinimum": 0,
                          "maximum": 9007199254740991
                        },
                        "TextContent": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "Title",
                        "Order",
                        "ContentType"
                      ],
                      "additionalProperties": false
                    }
                  }
                },
                "required": [
                  "Title",
                  "Order",
                  "Lessons"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": [
            "Title",
            "Modules"
          ],
          "additionalProperties": false
        },
        "Community": {
          "type": "object",
          "properties": {
            "Name": {
              "type": "string",
              "minLength": 1
            },
            "Description": {
              "type": "string"
            },
            "Spaces": {
              "default": [],
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "Name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "Slug": {
                    "type": "string",
                    "minLength": 1
                  },
                  "Description": {
                    "type": "string"
                  },
                  "Order": {
                    "type": "integer",
                    "exclusiveMinimum": 0,
                    "maximum": 9007199254740991
                  }
                },
                "required": [
                  "Name",
                  "Slug",
                  "Order"
                ],
                "additionalProperties": false
              }
            },
            "Events": {
              "default": [],
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "Title": {
                    "type": "string",
                    "minLength": 1
                  },
                  "Description": {
                    "type": "string"
                  },
                  "Space": {
                    "type": "string"
                  },
                  "StartAt": {
                    "type": "string"
                  },
                  "EndAt": {
                    "type": "string"
                  },
                  "LocationType": {
                    "type": "string",
                    "enum": [
                      "virtual",
                      "physical",
                      "hybrid"
                    ]
                  },
                  "LocationDetails": {
                    "type": "string"
                  },
                  "MeetingUrl": {
                    "type": "string",
                    "format": "uri"
                  },
                  "HostUserEmail": {
                    "type": "string",
                    "format": "email",
                    "pattern": "^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"
                  },
                  "Capacity": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 9007199254740991
                  },
                  "RecurrenceRule": {
                    "type": "object",
                    "properties": {
                      "Frequency": {
                        "type": "string",
                        "enum": [
                          "daily",
                          "weekly",
                          "monthly"
                        ]
                      },
                      "Interval": {
                        "default": 1,
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 9007199254740991
                      },
                      "DaysOfWeek": {
                        "type": "array",
                        "items": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 6
                        }
                      },
                      "EndType": {
                        "default": "never",
                        "type": "string",
                        "enum": [
                          "never",
                          "count",
                          "until"
                        ]
                      },
                      "Count": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 9007199254740991
                      },
                      "Until": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "Frequency",
                      "Interval",
                      "EndType"
                    ],
                    "additionalProperties": false
                  }
                },
                "required": [
                  "Title",
                  "StartAt",
                  "EndAt",
                  "LocationType",
                  "HostUserEmail"
                ],
                "additionalProperties": false
              }
            }
          },
          "required": [
            "Name",
            "Spaces",
            "Events"
          ],
          "additionalProperties": false
        },
        "Page": {
          "type": "object",
          "properties": {
            "Title": {
              "type": "string",
              "minLength": 1
            },
            "Content": {
              "type": "string",
              "minLength": 1
            }
          },
          "required": [
            "Title",
            "Content"
          ],
          "additionalProperties": false
        },
        "Coaching": {
          "type": "object",
          "properties": {
            "Title": {
              "type": "string",
              "minLength": 1
            },
            "Description": {
              "type": "string"
            },
            "Quantity": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            },
            "BookingLink": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "object",
                  "properties": {
                    "__type": {
                      "type": "string",
                      "const": "Ref"
                    },
                    "slug": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "__type",
                    "slug"
                  ],
                  "additionalProperties": false
                }
              ]
            },
            "ExpirationDays": {
              "type": "integer",
              "exclusiveMinimum": 0,
              "maximum": 9007199254740991
            }
          },
          "required": [
            "Title",
            "Quantity",
            "BookingLink"
          ],
          "additionalProperties": false
        },
        "Feed": {
          "type": "object",
          "properties": {
            "Title": {
              "type": "string",
              "minLength": 1
            },
            "Description": {
              "type": "string"
            }
          },
          "required": [
            "Title"
          ],
          "additionalProperties": false
        }
      },
      "required": [
        "Name",
        "ProductType"
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "Type",
    "Properties"
  ],
  "additionalProperties": false
}
